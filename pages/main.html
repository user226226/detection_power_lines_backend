<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/styles/main.css">
    <title>Обнаружение объектов ЛЭП</title>
  </head>
  <body>
    <div class="text-center">
        <h1 class="mb-3">Обнаружение объектов ЛЭП</h1>
    </div>

    <div class="flex-container">
      <!-- <div> -->
          <!-- <div class="img"> -->
              <!-- <img id="input" width="200"/> -->
          <!-- </div> -->
<!--           
          <input type="file" accept="image/*" onchange="loadFile(event)">
      </div> -->

      <img id="input" width="200"/>
      <input type="file" accept="image/*" onchange="loadFile(event)", enctype="multipart/form-data">
      <input type="button" value="Upload Image" onclick="uploadFile()">
    </div>
    <!-- <div style="text-align:center">
      <button>Найти ЛЭП</button>
    </div> -->
    

    <script>
        var loadFile = function(event) {
            var image = document.getElementById('input');
            console.log(image)
            image.src=URL.createObjectURL(event.target.files[0]);

            var formData = new FormData();
            formData.append('file', image.src);
            fetch('/image', {
              method: 'POST',
              body: formData,
            })
            .then(response => {
              console.log(response);
            })
            .catch(error => {
              console.error(error);
            });
        };

        function uploadFile() {
          console.log(document.getElementById('input').files)
          var file = document.getElementById('input').files[0];
          if (file) {
            var formData = new FormData();
            formData.append('file', file);
            fetch('/image', {
              method: 'POST',
              body: formData,
            })
            .then(response => {
              console.log(response);
            })
            .catch(error => {
              console.error(error);
            });
        }
      }
    </script>
  </body>
</html>