<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/styles/main.css">
    <title>Обнаружение объектов ЛЭП</title>
  </head>
  <body>
    <div class="text-center">
        <h1 class="mb-3">Обнаружение объектов ЛЭП</h1>
    </div>
    
    <div class="flex-container">

      <div class="select-image">
        <h2>Исходное изображение</h2>
        <img id="input" width="200"/>
        <div class="input">
          <label>
            <input type="file" accept="image/*" onchange="loadFile(event)", enctype="multipart/form-data">
            Загрузить изображение
          </label>
        </div>
      </div>

      <div class="select-image">
        <h2>Результат</h2>
        <img id="input" width="200"/>
        <input class="input" type="button" value="Получить результат" onclick="uploadFile(event)">
      </div>
    </div>

    <script>
        var img;
        var loadFile = function(event) {
            var image = document.getElementById('input');
            img = event.target.files[0]
            image.src=URL.createObjectURL(img);
        };

        var uploadFile = function(event) {
          var formData = new FormData();
          formData.append('file', img);
            fetch('/image', {
              method: 'POST',
              body: formData,
            })
            .then(response => {
              console.log(response);
            })
            .catch(error => {
              console.error(error);
            });
      }
    </script>
  </body>
</html>